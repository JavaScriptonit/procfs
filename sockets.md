# Сокеты в ОС Linux
https://habr.com/ru/companies/otus/articles/539550/

## Пример работы с сокетами в Linux:

### Команды для сервера Убунту (для ожидания входящих подключений на порту 8080):

1. Установка netcat (Утилита позволяет "из коробки" работать с сокетами, которые используют в качестве транспорта TCP и UDP протоколы).
Примеры сценариев использования:
- перенаправление входящих/исходящих запросов;
- трансляция данных на экран в шестнадцатеричном формате.

```
sudo apt install netcat
nc -l -p 8080
```
Вывод в терминал:
```
POST / HTTP/1.1
Host: 93.183.74.88:8080
User-Agent: curl/7.64.1
Accept: */*
Content-Length: 14
Content-Type: application/x-www-form-urlencoded

Hello from Mac
```

### На МакОС:

При выполнении команды `nc -l -p 8080` на сервере создается сокет, который слушает входящие соединения на порту 8080. Когда вы вызываете `curl` на вашем Mac, он устанавливает TCP-соединение с сервером, и операционная система на обеих машинах использует сокеты для обмена данными. 

Сокеты являются точками конечного взаимодействия в сетевом соединении и могут передавать данные в обе стороны. В вашем примере `curl` создает сокет для отправки HTTP-запроса, и этот сокет устанавливается с сервером, который также работает с сокетом для его обработки.

```
brew install socat
curl -X POST -d "Hello from Mac" http://93.183.74.88:8080
```

### Сокеты запущенного процесса:

1. После выполнения команды `nc -l -p 8080` на сервере нужно найти PID процесса - `ps aux | grep 8080`:
```
root        3039  0.0  0.0   3536  1228 pts/0    S+   18:48   0:00 nc -l -p 8080
```

2. Вся инфа по процессу: `ls -la /proc/3039`

3. Дескрипторы: `ls -la /proc/3039/fd`
```
lrwx------ 1 root root 64 Mar 12 18:51 0 -> /dev/pts/0
lrwx------ 1 root root 64 Mar 12 18:51 1 -> /dev/pts/0
lrwx------ 1 root root 64 Mar 12 18:51 2 -> /dev/pts/0
lrwx------ 1 root root 64 Mar 12 18:51 3 -> 'socket:[32373]'
lrwx------ 1 root root 64 Mar 12 18:51 4 -> 'socket:[32374]'
```

### Что мы получили:

- **Сокеты**: Два сокета `socket:[32373]` и `socket:[32374]` были созданы для передачи данных между двумя устройствами (Mac и сервером Ubuntu) по порту 8080. Эти сокеты обеспечивают двустороннюю передачу данных в рамках установленного TCP-соединения.
  
### Итог:

1. **`socket:[32373]` и `socket:[32374]`** предназначены для передачи сообщений между Mac и сервером. Эти сокеты представляют собой конечные точки в сетевом взаимодействии, обеспечивая связь между двумя устройствами на уровне передачи данных.

2. Успешно установили соединение, отправили и получили сообщение, а также смогли проанализировать системные ресурсы и сокеты, используемые в этом процессе.